Outgoing Mobilities API
=======================

* [What is the status of this document?][statuses]
* [See the index of all other EWP Specifications][develhub]


Summary
-------

This document describes the **Outgoing Mobilities API**. This API is
implemented by the sending institution. It allows the receiving HEI to read,
write and enumerate mobilities stored on the sending HEI's servers.

**Currently, this API describes mobilities of one type only** - *Student
Mobilities for Studies*. This may change in the future (although, it's also
possible that a separate API for each mobility type might be released).


Introduction
------------

### Reminder on vocabulary

Keep in mind that definitions of "sending HEI" and "receiving HEI" come from
the student mobility vocabulary. In case of this particular API this means
that:

* **sending HEI == responding HEI** (HEI which is sending the student == HEI
  which implements the API, and responds to the HTTP request),
* **receiving HEI == requesting HEI** (HEI which is receiving the student ==
  HEI which implements the client, and sends the HTTP request).

As long as we use these terms consistently, there shouldn't be much confusion
though.


<a name='mobility_ids'></a>

### Uniqueness of `mobility_ids`

We [want](https://github.com/erasmus-without-paper/general-issues/issues/10)
Outgoing Mobility identifiers to be unique within the entire EWP Network. In
order to guarantee this, we need to impose some requirements.

 * The identifiers SHOULD be generated by the *sending* institution (when a
   new nomination is first created, or a previously existing mobility is
   imported from other sources).

 * The identifiers MUST be formmated to match the UUID canonical format -
   lowercase hexadecimals with dashes, e.g.
   `123e4567-e89b-12d3-a456-426655440000`.

 * When generating new identifiers, implementers MUST use proper entropy to
   guarantee its uniqueness. The sending institution's SCHAC ID SHOULD be a
   part of this entropy (e.g. by using a Version 5 UUID with a namespace
   derived from your SCHAC ID). This maximizes the probability that
   configuration errors are discovered locally, before their effects spread
   outside.


Endpoints to be implemented
---------------------------

Server implementers MUST:

 * Implement the [`get` endpoint](endpoints/get.md).
 * Implement the [`index` endpoint](endpoints/index.md).
 * Implement the [`update` endpoint](endpoints/update.md).
 * Put the URLs of these endpoints in their [manifest file][discovery-api], as
   described in [manifest-entry.xsd](manifest-entry.xsd).

The details on each of these endpoints are described on separate pages of this
API specification (use the links above).


Data model entities involved in the response
--------------------------------------------

 * Mobility
 * Person
 * Coordinator
 * IIA Partner
 * Learning Agreement
 * Learning Agreement Component
 * Learning Opportunity Specification
 * Learning Opportunity Instance
 * Academic Term


[develhub]: http://developers.erasmuswithoutpaper.eu/
[statuses]: https://github.com/erasmus-without-paper/ewp-specs-management#statuses
[registry-spec]: https://github.com/erasmus-without-paper/ewp-specs-api-registry
[discovery-api]: https://github.com/erasmus-without-paper/ewp-specs-api-discovery
[echo]: https://github.com/erasmus-without-paper/ewp-specs-api-echo
[error-handling]: https://github.com/erasmus-without-paper/ewp-specs-architecture#error-handling
[institutions-api]: https://github.com/erasmus-without-paper/ewp-specs-api-institutions
